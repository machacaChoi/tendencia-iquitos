---
import ArrowDown from "../components/icons/Arrow-down.astro";
import MapPin from "../components/icons/Map-Pin.astro";
import Mail from "../components/icons/Mail.astro";
import Whatsapp from "./icons/White-Wsp.astro";

---

<header class="fixed z-40 w-full">
    <section id="globalNav"
        class="globalNav absolute z-40 w-full overflow-x-hidden bg-accent/85 h-screen backdrop-blur-md">
        <div id="globalNav" class="globalNav absolute w-full self-center text-xl mt-14">
            <button id="btnBackToMainMenu" class="btnBackToMainMenu flex ps-10  w-full text-accent rotarVolver">
                <ArrowDown class="size-8 rotate-90" />
            </button>
        </div>
        <div id="MainMenu" class="globalMainMenu mt-16 absolute w-full">
            <nav>
                <ul class="text-xl font-bold text-white">                    
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white menuMovil">
                                Inicio
                            </a>
                        </div>
                    </li>
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white menuMovil">
                                Portada
                            </a>
                        </div>
                    </li>
                    <li>
                        <div>
                            <button id="btnMenuI"
                                class="flex px-10 py-4 items-center w-full hover:text-black justify-between hover:bg-white menuMovil" style="word-spacing: 0.5rem;">
                                Tus Artistas
                                <ArrowDown class="size-8 -rotate-90" />
                            </button>
                        </div>
                    </li>
                    <li>
                        <div>
                            <button id="btnMenuE"
                                class="flex px-10 py-4 items-center w-full hover:text-black justify-between hover:bg-white menuMovil">
                                Eventos
                                <ArrowDown class="size-8 -rotate-90" />
                            </button>
                        </div>
                    </li>
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white menuMovil">
                                Campa√±as
                            </a>
                        </div>
                    </li>
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white menuMovil" style="word-spacing: 0.5rem;">
                                Premio Soy Tendencia
                            </a>
                        </div>
                    </li>
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white menuMovil">
                                Contacto
                            </a>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
        <div id="SubMenuI" class="globalNavSubMenu absolute w-full mt-16">
            <nav>
                <ul class="text-xl font-bold text-white">
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white subMenuMovil">
                                Cantantes
                            </a>
                        </div>
                    </li>
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white subMenuMovil">
                                Actores
                            </a>
                        </div>
                    </li>    
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white subMenuMovil">
                                Musicos
                            </a>
                        </div>
                    </li>         
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white subMenuMovil">
                                Moda
                            </a>
                        </div>
                    </li>  
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white subMenuMovil">
                                Literatura
                            </a>
                        </div>
                    </li>  
                </ul>
            </nav>
        </div>

        <div id="SubMenuE" class="globalNavSubMenu absolute w-full mt-16">
            <nav>
                <ul class="text-xl font-bold text-white">
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white subMenuMovil">
                                Conciertos
                            </a>
                        </div>
                    </li>
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white subMenuMovil">
                                Cine
                            </a>
                        </div>
                    </li>    
                    <li>
                        <div>
                            <a href="#"
                                class="flex ps-10 py-4 items-center w-full hover:text-black hover:bg-white subMenuMovil">
                                Teatro
                            </a>
                        </div>
                    </li>   
                </ul>
            </nav>
        </div>
    </section>

    <section class="relative w-full text-white text-sm xl:text-[.975rem] bg-white self-center border-b transition-colors duration-500 shadow-xl">
        <div class="flex mx-auto py-4 lg:py-0 ps-5 md:ps-0">
            <div class="block lg:hidden justify-center">
                <a href="../" class="overflow-hidden text-2xl font-black" style="font-family: 'BankGothic';">
                    <img src="../img/logo-tendencia-rojo.webp" class="h-10">
                </a>
            </div>
            <div class="relative w-full hidden lg:block bg-accent/95 transition-all duration-400">
                <div class="flex bg-white justify-center">
                    <a href="../" class="overflow-hidden text-2xl font-black" style="font-family: 'BankGothic';">
                        <img src="../img/logo-tendencia-rojo.webp" class="h-20">
                    </a>
                </div>
                <div class="flex justify-center">
                    <div class="">
                        <nav class="flex cursor-pointer ">
                            <div class="me-5">
                                <ul class="self-center flex gap-10 font-bold ">
                                    <li>
                                        <a href="#" class="relative flex py-5 underline-animation">
                                            Inicio
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" class="relative flex py-5 underline-animation">
                                            Portada
                                        </a>
                                    </li>
                                    <li>
                                        <div class="MenuPadre items-center">
                                            <button class="relative flex py-5 underline-animation ms-1 gap-2 items-center" style="word-spacing: 0.5rem;">
                                                Tus Artistas
                                                <ArrowDown class="size-4 stroke-[4px]" />
                                            </button>
                                            <div class="MenuHijo absolute z-10 shadow-sm text-black">
                                                <ul class="relative divide-y">
                                                    <div>
                                                        <a href="#">
                                                            <li class="relative flex p-4 bg-white hover:bg-accent hover:text-white">
                                                                Cantantes
                                                            </li>
                                                        </a>
                                                    </div>
                                                    <div>
                                                        <a href="#">
                                                            <li class="relative flex p-4 bg-white hover:bg-accent hover:text-white">
                                                                Actores
                                                            </li>
                                                        </a>
                                                    </div>
                                                    <div>
                                                        <a href="#">
                                                            <li class="relative flex p-4 bg-white hover:bg-accent hover:text-white">
                                                                Musicos
                                                            </li>
                                                        </a>
                                                    </div>        
                                                    <div>
                                                        <a href="#">
                                                            <li class="relative flex p-4 bg-white hover:bg-accent hover:text-white">
                                                                Moda
                                                            </li>
                                                        </a>
                                                    </div>
                                                    <div>
                                                        <a href="#">
                                                            <li class="relative flex p-4 bg-white hover:bg-accent hover:text-white">
                                                                Literatura
                                                            </li>
                                                        </a>
                                                    </div>
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <a href="#" class="relative flex py-5 underline-animation">
                                            Deporte
                                        </a>
                                    </li>
                                    <li>
                                        <div class="MenuPadre items-center">
                                            <button class="relative flex py-5 underline-animation ms-1 gap-2 items-center">
                                                Eventos
                                                <ArrowDown class="size-4 stroke-[4px]" />
                                            </button>
                                            <div class="MenuHijo absolute z-10 shadow-sm text-black">
                                                <ul class="relative divide-y">
                                                    <div>
                                                        <a href="#">
                                                            <li class="relative flex p-4 bg-white hover:bg-accent hover:text-white">
                                                                Conciertos
                                                            </li>
                                                        </a>
                                                    </div>
                                                    <div>
                                                        <a href="#">
                                                            <li class="relative flex p-4 bg-white hover:bg-accent hover:text-white">
                                                                Cine
                                                            </li>
                                                        </a>
                                                    </div>
                                                    <div>
                                                        <a href="#">
                                                            <li class="relative flex p-4 bg-white hover:bg-accent hover:text-white">
                                                                Teatro
                                                            </li>
                                                        </a>
                                                    </div>  
                                                </ul>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <a href="#" class="relative flex py-5 underline-animation">
                                            Campa√±as
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" class="relative flex py-5 underline-animation" style="word-spacing: 0.5rem;">
                                            Premio Soy Tendencia
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" class="relative flex py-5 underline-animation">
                                            Contacto
                                        </a>
                                    </li>
                                </ul>
                            </div>
        
                            
                        </nav>
                    </div>
                </div>
            </div>
            
            <div class="z-30 self-center block lg:hidden absolute right-20">
                <a href="#"
                    target="_blank"
                    class="flex py-1 md:gap-3 items-center">
                    <div class="MenuPadre items-center">
                        <Whatsapp class="size-8" />
                    </div>
                </a>
            </div>

            <div class="z-50 self-center block lg:hidden lg:ms-0 absolute right-5">
                <div class="flex">
                    <button id="btnDisplayNav" class="flex flex-col size-[2rem] border-0 gap-2 py-1">
                        <div class="bg-accent size-full rounded-sm origin-left">
                        </div>
                        <div class="bg-accent size-full rounded-sm origin-left">
                        </div>
                        <div class="bg-accent size-full rounded-sm origin-left">
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </section>
</header>
<style>
    .underline-animation::after {
        content: "";
        position: absolute;
        width: 100%;
        height: 4px;
        bottom: 10px;
        left: 0;     
        color: #FFFFFF;   
        background-color: currentColor;
        visibility: hidden;
        transform: scaleX(0);
        transition: all 0.3s ease-in-out;
    }

    .underline-animation:hover::after {
        visibility: visible;
        transform: scaleX(1);
    }

    .MenuPadre:hover .underline-animation::after {
        visibility: visible;
        transform: scaleX(1);
    }

    .MenuPadre:hover > button > svg{        
        transform: rotate(90deg);
        transition: transform .3s ease-in-out;
    }

    .ms-full {
        margin-left: 100%;
    }

    .menuMovil {
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.9s ease-in-out;
    }

    .subMenuMovil {
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.9s ease-in-out;
    }

    .mostrarSombra {
        visibility: visible;
        opacity: 1;
    }

    .rotarVolver:hover > svg {
        transform: rotate(-90deg);
        transition: transform 0.3s ease-in-out;
    }

    .MenuHijo {
        visibility: hidden;
        opacity: 0;
    }

    .MenuPadre:hover > .MenuHijo {
        visibility: visible;
        opacity: 1;
        transition: all 0.3s ease-in-out;
    }

    button > div {
        transition: all 0.5s;
    }

    .globalNav {
        visibility: hidden;
        transform: translateY(-100%);
        transition:
            all
            0.4s ease-in-out;
    }

    .mostrar-nav {
        visibility: visible;
        transform: translateY(0);
    }

    .btnDisplayNav div:first-child {
        transform: rotate(45deg);
        background-color: white;
    }
    .btnDisplayNav div:nth-child(2) {
        opacity: 0;
    }
    .btnDisplayNav div:last-child {
        transform: rotate(-45deg);
        background-color: white;
    }

    .globalMainMenu {
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.4s ease-in-out;
    }

    .mostrar-MainMenu {
        visibility: visible;
        opacity: 1;
        transform: translatex(0);
    }

    .btnBackToMainMenu {
        visibility: hidden;
        opacity: 0;
        color: #ffffff;
        transform: translatex(100%);
        transition:
            opacity 0.5s ease-out,
            transform 0.5s ease-in-out;
    }

    .globalNavSubMenu {
        visibility: hidden;
        opacity: 0;
        /*transform: translatex(100%);*/
        transition:
            opacity 0.4s ease-in-out,
            transform 0s,
            0.5s ease-in-out;
    }

    .mostrar-subMenu {
        visibility: visible;
        opacity: 1;
        transform: translatex(0);
    }

    .MainMenu > nav > ul > li > div {
        visibility: hidden;
        transition:
            visibility 0s,
            0.5s ease-in-out;
        transform: translatex(0);
    }

    .ocultarMenu {
        visibility: hidden;
        opacity: 0;
        transform: translatex(-100%);
        transition:
            opacity 0.4s ease-in-out,
            transform 0.2s ease-in-out;
    }

    @media (min-width: 1024px) {
        .mostrar-nav {
            visibility: hidden;
            transform: translateY(100%);
        }

        .btnDisplayNav div:first-child {
            transform: rotate(-45deg);
        }
        .btnDisplayNav div:nth-child(2) {
            opacity: 1;
        }
        .btnDisplayNav div:last-child {
            transform: rotate(45deg);
        }
    }
</style>
<script>
    const btnDisplayNav = document.getElementById(
        "btnDisplayNav",
    ) as HTMLButtonElement;
    const globalNav = document.getElementById("globalNav");
    const MainMenu = document.getElementById("MainMenu");
    const btnMenuI = document.getElementById("btnMenuI");
    const SubMenuI = document.getElementById("SubMenuI");
    const btnMenuE = document.getElementById("btnMenuE");
    const SubMenuE = document.getElementById("SubMenuE");
    const btnBackToMainMenu = document.getElementById("btnBackToMainMenu");
    const elementosMenu = document.getElementsByClassName("menuMovil");
    const elementosSubMenu = document.getElementsByClassName("subMenuMovil");

    var menuI = false;
    var menuE = false;

    btnDisplayNav?.addEventListener("click", () => {
        btnDisplayNav.disabled = true;

        setTimeout(() => {
            btnDisplayNav.disabled = false;
        }, 700);

        if (globalNav?.classList.contains("mostrar-nav")) {
            globalNav?.classList.remove("mostrar-nav");
            btnDisplayNav?.classList.remove("btnDisplayNav");
            MainMenu?.classList.remove("mostrar-MainMenu");
            SubMenuI?.classList.remove("mostrar-subMenu");
            SubMenuE?.classList.remove("mostrar-subMenu");
            btnBackToMainMenu?.classList.remove("mostrar-subMenu");
            menuI = false;
            menuE = false;

            for (let i = 0; i < elementosMenu.length; i++) {
                elementosMenu[i].classList.remove("mostrarSombra");
            }

            for (let i = 0; i < elementosSubMenu.length; i++) {
                elementosSubMenu[i].classList.remove("mostrarSombra");
            }
        } else {
            globalNav?.classList.toggle("mostrar-nav");
            btnDisplayNav?.classList.toggle("btnDisplayNav");
            MainMenu?.classList.toggle("mostrar-MainMenu");
            for (let i = 0; i < elementosMenu.length; i++) {
                setTimeout(() => {
                    elementosMenu[i].classList.toggle("mostrarSombra");
                }, i * 80);
            }
        }
    });

    btnMenuI?.addEventListener("click", () => {
        SubMenuI?.classList.toggle("mostrar-subMenu");
        MainMenu?.classList.toggle("mostrar-MainMenu");
        btnBackToMainMenu?.classList.toggle("mostrar-subMenu");
        menuI = !menuI;
        for (let i = 0; i < elementosSubMenu.length; i++) {
            setTimeout(() => {
                elementosSubMenu[i].classList.toggle("mostrarSombra");
            }, i * 80);
        }

        for (let i = 0; i < elementosMenu.length; i++) {
            elementosMenu[i].classList.remove("mostrarSombra");
        }
    });

    btnMenuE?.addEventListener("click", () => {
        SubMenuE?.classList.toggle("mostrar-subMenu");
        MainMenu?.classList.toggle("mostrar-MainMenu");
        btnBackToMainMenu?.classList.toggle("mostrar-subMenu");
        menuE = !menuE;
        for (let i = 0; i < elementosSubMenu.length; i++) {
            setTimeout(() => {
                elementosSubMenu[i].classList.toggle("mostrarSombra");
            }, i * 80);
        }

        for (let i = 0; i < elementosMenu.length; i++) {
            elementosMenu[i].classList.remove("mostrarSombra");
        }
    });

    btnBackToMainMenu?.addEventListener("click", () => {
        if (menuI) {
            SubMenuI?.classList.toggle("mostrar-subMenu");
            MainMenu?.classList.toggle("mostrar-MainMenu");
            btnBackToMainMenu?.classList.toggle("mostrar-subMenu");
            menuI = !menuI;
            for (let i = 0; i < elementosMenu.length; i++) {
                setTimeout(() => {
                    elementosMenu[i].classList.toggle("mostrarSombra");
                }, i * 80);
            }

            for (let i = 0; i < elementosSubMenu.length; i++) {
                elementosSubMenu[i].classList.remove("mostrarSombra");
            }
        }

        else if (menuE) {
            SubMenuE?.classList.toggle("mostrar-subMenu");
            MainMenu?.classList.toggle("mostrar-MainMenu");
            btnBackToMainMenu?.classList.toggle("mostrar-subMenu");
            menuE = !menuE;
            for (let i = 0; i < elementosMenu.length; i++) {
                setTimeout(() => {
                    elementosMenu[i].classList.toggle("mostrarSombra");
                }, i * 80);
            }

            for (let i = 0; i < elementosSubMenu.length; i++) {
                elementosSubMenu[i].classList.remove("mostrarSombra");
            }
        }
    });

</script>
